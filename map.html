<!DOCTYPE html>
<html lang="en">
  <head>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
  integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
  crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
   integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
   crossorigin=""></script>
   <!-- <script src="http://maps.google.com/maps/api/js?v=3&sensor=false"></script>
   <script src="lib/leaflet/Google.js"></script> -->

   <script src="us_states.geojson" type="text/javascript"></script>
    </head>
    <body>
    <div id="map"></div>
    <div id="sideInfoPopUp"></div>
    <style> #map { height: 800px; width: auto} </style>
<script>

var mymap = L.map('map').setView([46.8797, -110.3626], 7);

var topo = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox.streets',
  accessToken: 'pk.eyJ1Ijoic2hhcm9uZnVsbGVyIiwiYSI6ImNqb2dwNWZiZjBoanAzdm1uMGl4aHV3MnEifQ.Xiw-4Exg4p6kiqkJXow27g'
}).addTo(mymap);

var GeoportailFrance_ignMaps = L.tileLayer('https://wxs.ign.fr/{apikey}/geoportail/wmts?REQUEST=GetTile&SERVICE=WMTS&VERSION=1.0.0&STYLE={style}&TILEMATRIXSET=PM&FORMAT={format}&LAYER=GEOGRAPHICALGRIDSYSTEMS.MAPS&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}', {
	attribution: '<a target="_blank" href="https://www.geoportail.gouv.fr/">Geoportail France</a>',
	bounds: [[-75, -180], [81, 180]],
	minZoom: 2,
	maxZoom: 18,
	apikey: 'choisirgeoportail',
	format: 'image/jpeg',
	style: 'normal'
});

//tried to add roadmap layer from google

// var googleRoadmapLayer = new L.Google('ROADMAP');
// map.addLayer(googleRoadmapLayer);

//This worked and gave an outline of Montana--all lat lngs in json backwards (had to flip manually)

// var montana = L.polyline([[49.000239,-104.047534],[47.861036,-104.042057],[45.944106,-104.047534],[44.996596,-104.042057],[44.996596,-104.058488],[45.002073,-105.91517],[45.002073,-109.080842],[45.002073,-111.05254],[44.476286,-111.047063],[44.580348,-111.227803],[44.75561,-111.386634],[44.547487,-111.616665],[44.509148,-111.819312],[44.563917,-111.868605],[44.520102,-112.104113],[44.569394,-112.241036],[44.481763,-112.471068],[44.48724,-112.783254],[44.394132,-112.887315],[44.448902,-113.002331],[44.772041,-113.133778],[44.782995,-113.341901],[44.865149,-113.456917],[45.056842,-113.45144],[45.128042,-113.571933],[45.330689,-113.736241],[45.522382,-113.834826],[45.604536,-113.807441],[45.703121,-113.98818],[45.593582,-114.086765,],[45.456659,-114.333228],[45.560721,-114.546828],[45.670259,-114.497536],[45.774321,-114.568736],[45.88386,-114.387997],[46.037214,-114.492059],[46.272723,-114.464674],[46.645155,-114.322274],[46.639678,-114.612552],[46.705401,-114.623506],[46.809463,-114.886399],[46.919002,-114.930214],[47.187372,-115.302646],[47.258572,-115.324554],[47.302388,-115.527201],[47.42288,-115.718894],[47.696727,-115.724371],[47.976051,-116.04751],[49.000239,-116.04751],[48.994762,-111.50165],[49.000239,-109.453274],[49.000239,-104.047534]], {color: 'red'}).addTo(mymap);
// // var polygon = L.polygon(montana, {color: 'red'}).addTo(mymap);
// map.fitBounds(polyline.getBounds());
//

//adding markers to the maps

var marker = L.marker([46.8797, -110.3626]).addTo(mymap);


//adding info to the popUp side bar

// function onEachFeature(feature, layer) {
//     layer.on({
//         click: function populate() {
//           document.getElementById("sideInfoPopUp"),
//           innerHTML = <h4>feature.properties.place_name</h4> + "<br>" + feature.properties.loc_img_link + "<br>" + feature.properties.loc_desc + "<br>" + feature.properties.info_link + <button id="addStories" placeholder="Add my Story"></button>
//         }
//     });
// }

//Local geoJson file loaded in--This code reads in the data and I get borders
geojson = L.geoJson(states, {
  style: style,
}).addTo(mymap);

L.geoJSON(states.responseJSON);

function style(feature) {
  return {
    weight: 3.5,
    opacity: 100,
    color: 'black',
    fillOpacity: 0
  };
};
// map.eachLayer(function (layer) {
//      var n = '';
//      if (typeof layer.feature !== 'undefined') {
//          var n = layer.feature.properties.STATE_NAME;
//      }
//      if (n.replace(/\s+/g, '-').toLowerCase() == 'montana') {
//          // found the state-- go ahead and highlight it
//          layer.setStyle({
//              weight: 3,
//              color: '#666',
//              dashArray: '',
//              fillOpacity: 0.7,
//              fillColor:'#499bc4'
//          });
//
//          if (!L.Browser.ie && !L.Browser.opera) {
//              layer.bringToFront();
//          }
//      }
//  });



//
// var us = 'https://leafletjs.com/examples/choropleth/us-states.js'
//  L.geoJson(statesData, us).addTo(mymap);
// function usState(d) {
//   return d = 'Montana' ? true :
//   d != 'Montana' ? false
// };


//trying to incorporate streetview after certain zoom level

// var mapGoogleStreet = new google.maps.LatLng(latitude,longitude); //fenway = wf {G: 40.989025, K: 29.096618000000035}
// Insurance.Map.StreetView(fenway);
//
// StreetView: function (coor) {
//             var options = {
//                 position: coor,
//                 pov: {
//                     heading: 34,
//                     pitch:10
//                 }
//             };
//             var panorama = new google.maps.StreetViewPanorama(document.getElementById('map'), options);
//             map.setStreetView(panorama);
//
//

//Trying to clip just montana
//        }


// map.on('load', function () {
//   map.addSource("statesData", {
//     "type": "geojson",
//     // "data":"../us_states.geojson"
//     "data":"https://leafletjs.com/examples/choropleth/us-states.js" //"https://www.mapbox.com/mapbox-gl-js/assets/us_states.geojson"
//   });
// });

//Trying to clip just Montana

//var montana = state.feature.properties.NAME ==='Montana';
//map.setFeatureState({source: 'states', id: 30});
var clippedMontana = function clip(states) {
  console.log("montana")
   for (var i = 0; i < states.length; i++) {
      if (states.feature.properties.STATE_NAME[i] === "Montana") {
      return true;
  }   else {
    return false;
  }}
 };

//Add borders around each state


// map.addLayer({
//         "id": "state-borders",
//         "type": "line",
//         "source": "stateData",
//         "layout": {},
//         "paint": {
//             "line-color": "#627BC1",
//             "line-width": 2
//         }
//     });
  // }
 var baseMaps = {
    "Topo": topo,
    "Streets": streets
  };
  //   'Google Roadmap': googleRoadmapLayer, 'Google': googleLayer};
  // var overlayMaps = {geojson }
  // L.control.layers(baseMaps, overlayMaps).addTo(mymap);
</script>
</body>
</html>
