<!DOCTYPE html>
<html lang="en">
  <head>
  <link href="leaflet/leaflet.css" type="text/css" rel="stylesheet">
  <!-- <link href="cssgoeshere" type="text/css" rel="stylesheet"> -->
</head>

   <!-- <script src="http://maps.google.com/maps/api/js?v=3&sensor=false"></script> -->
    <!-- <script src="lib/leaflet/Google.js"></script> -->

    <!-- <script src="/lib/jquery.min.js"></script>
<script src="/lib/jquery.plugin.js"></script>  -->
    <body>
    <div id="map"></div>
    <div id="sideInfoPopUp"></div>

    <style> #map { height: 800px; width: auto} </style>

    <script src="jquery-2.1.1.min.js"></script>
    <script src="leaflet/leaflet.js"></script>

    <script src="ghost2.geojson"></script>
    <script src="us_states.geojson"></script>
    <script src="canada-province.geojson"></script>
     <!-- <script src="http://code.jquery.com/jquery-2.2.0.min.js"></script>  -->
<script>

var mymap = L.map('map').setView([46.8797, -110.3626], 7.2); //currently loads to level 18

var topo =  L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox.streets',
  accessToken: 'pk.eyJ1Ijoic2hhcm9uZnVsbGVyIiwiYSI6ImNqb2dwNWZiZjBoanAzdm1uMGl4aHV3MnEifQ.Xiw-4Exg4p6kiqkJXow27g'
}).addTo(mymap);

// var GeoportailFrance_ignMaps = L.tileLayer('https://wxs.ign.fr/{apikey}/geoportail/wmts?REQUEST=GetTile&SERVICE=WMTS&VERSION=1.0.0&STYLE={style}&TILEMATRIXSET=PM&FORMAT={format}&LAYER=GEOGRAPHICALGRIDSYSTEMS.MAPS&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}', {
// 	attribution: '<a target="_blank" href="https://www.geoportail.gouv.fr/">Geoportail France</a>',
// 	bounds: [[-75, -180], [81, 180]],
// 	minZoom: 2,
// 	maxZoom: 18,
// 	apikey: 'choisirgeoportail',
// 	format: 'image/jpeg',
// 	style: 'normal'
// });

//tried to add roadmap layer from google

// var googleRoadmapLayer = new L.Google('ROADMAP');
// map.addLayer(googleRoadmapLayer);


// map.fitBounds(polyline.getBounds());
//

//Local geoJson file loaded in--This code reads in the data and I get borders separated montana but only US


L.geoJSON(states, {
  style: styling
}).addTo(mymap);

function styling (feature) {
  if (feature.properties.STATE_NAME === 'Montana') {
    return {fillOpacity: 0, color: 'black' }
  } else {
    return {fillOpacity: .5, color: 'black' }
  }
}
L.geoJSON(canada, {
  style: stylingCa
}).addTo(mymap);

function stylingCa (feature) {
    return {fillOpacity: .5, color: 'black' }
  }

//MARKERS
//adding markers to the maps

// var marker = L.marker([46.8797, -110.3626]).addTo(mymap);


//multiple markers with icon--https://maptimeboston.github.io/leaflet-intro/and video https://www.youtube.com/watch?v=fDfkjx-VhLI  icon size shrinks with zoom in
var ghost = new L.icon({
    iconUrl: "ghost-icon.png",
    iconSize: [40,40]
  });

function ghostInfo (feature,
  layer) {
    console.log("I'm reading");
      layer.bindPopup("<h1>I'm the scariest ghost on the planet</h1>");
    layer.setIcon(ghost);
  };
L.geoJson(ghost2 ,{
      onEachFeature: ghostInfo
    }).addTo(mymap);
    // pointToLayer: function(feature,latlng){
	  // return L.marker(latlng,{icon: ghostIcon});
    // }
  //}).addTo(mymap);
 //});
// geojson2 = L.geoJSON(ghost, {
//   style: styling
// }).addTo(mymap);
// var my_json;
// $.getJSON('ghost.geojson', function(ghost) {
  // my_json = L.geoJson(ghost2, {
  //   pointToLayer: function(feature, latlng) {
  //     var ghostIcon = new L.Icon({
  //       options: {
  //         iconSize: [16,16],
  //         iconAnchor: [13,27],
  //         iconUrl: 'ghost-icon.png'
  //       }
  //       }).addTo(mymap);
  //     }
  //
  // });

//       return L.marker(latlng, {icon: ghostIcon});
//     },
//     onEachFeature: function(feature, layer) {
//       layer.bindPopup(feature.properties.ghost_name);
//     }
//   });
//   my_json.addTo(markers.addTo(mymap));
// });
//         }
//       })
//     }
//   })
// })
//
// //making markers interactive
// pointToLayer: function(feature,latlng){
//     var marker = L.marker(latlng,{icon: ghostIcon});
//   marker.bindPopup(feature.properties.Location + '<br/>' + feature.properties.OPEN_DT);
//   return marker;
// }

//adding info to the popUp side bar

// function onEachFeature(feature, layer) {
//     layer.on({
//         click: function populate() {
//           document.getElementById("sideInfoPopUp"),
//           innerHTML = <h4>feature.properties.place_name</h4> + "<br>" + feature.properties.loc_img_link + "<br>" + feature.properties.loc_desc + "<br>" + feature.properties.info_link + <button id="addStories" placeholder="Add my Story"></button>
//         }
//     });
// }
 //map.fitBounds(polygon.getBounds());



//trying to incorporate streetview after certain zoom level

// var mapGoogleStreet = new google.maps.LatLng(latitude,longitude); //fenway = wf {G: 40.989025, K: 29.096618000000035}
// Insurance.Map.StreetView(fenway);
//
// StreetView: function (coor) {
//             var options = {
//                 position: coor,
//                 pov: {
//                     heading: 34,
//                     pitch:10
//                 }
//             };
//             var panorama = new google.maps.StreetViewPanorama(document.getElementById('map'), options);
//             map.setStreetView(panorama);
//
//

//Trying to clip just montana
//        }


// map.on('load', function () {
//   map.addSource("statesData", {
//     "type": "geojson",
//     // "data":"../us_states.geojson"
//     "data":"https://leafletjs.com/examples/choropleth/us-states.js" //"https://www.mapbox.com/mapbox-gl-js/assets/us_states.geojson"
//   });
// });

//Trying to clip just Montana

//var montana = state.feature.properties.NAME ==='Montana';
//map.setFeatureState({source: 'states', id: 30});
// var clippedMontana = function clip(states) {
//   console.log("montana")
//    for (var i = 0; i < states.length; i++) {
//       if (states.feature.properties.STATE_NAME[i] === "Montana") {
//       return this.states.feature.properties({setView: true});
//   }   else {
//     return {setView: false};
//   }}
//  };

//Add borders around each state


// map.addLayer({
//         "id": "state-borders",
//         "type": "line",
//         "source": "stateData",
//         "layout": {},
//         "paint": {
//             "line-color": "#627BC1",
//             "line-width": 2
//         }
//     });
  // }
 // var baseMaps = {
 //    "Topo": topo,
 //    "Streets": streets
 //  };
  //   'Google Roadmap': googleRoadmapLayer, 'Google': googleLayer};
  // var overlayMaps = {geojson }
  // L.control.layers(baseMaps, overlayMaps).addTo(mymap);
</script>
</body>
</html>
